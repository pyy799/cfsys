<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>找回密码</title>
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="/static/css/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="/static/css/ionicons/css/ionicons.min.css">
  <link rel="stylesheet" href="/static/dist/css/AdminLTE.min.css">
  <link rel="stylesheet" href="/static/plugins/iCheck/square/blue.css">
</head>
<body class="hold-transition login-page">
<div class="login-box">
    <div class="login-logo">
        <a href="javascript:;">航天长峰产品信息管理</a>
    </div>
    <div class="login-box-body">
        <p class="login-box-msg">找回密码</p>
        <form id="reset_password" method="post" action="/reset_password_success/">
            {% csrf_token %}
            <div class="form-group has-feedback">
                <label for="password" style="font-weight: 400">
                    尊敬的{{ username }},您已经成功找回密码,输入新密码:
                </label>
                <input type="password" class="form-control input-inline" placeholder="新密码" name="password" id="password">
                <span class="glyphicon glyphicon-lock form-control-feedback"></span>
                <label for="password_confirm" style="font-weight: 400;margin-top: 10px">
                    请确认密码:
                </label>
                <input type="password" class="form-control input-inline" placeholder="确认密码" name="password" id="password_confirm">
                <input hidden id="username" name="username" value="{{ username }}">
                <span class="glyphicon glyphicon-lock form-control-feedback" style="margin-top: 70px"></span>
            </div>
            <div class="row">
                <div class="col-xs-4">
                    <button type="button" class="btn btn-primary btn-block btn-flat"
                        onclick="reset_password()">确定</button>
                </div>
            </div>
        </form>
        <div id="warnPlace" style="color:red"></div>
    </div>
</div>
<script src="/static/plugins/jQuery/jquery-2.2.3.min.js"></script>
<script src="/static/bootstrap/js/bootstrap.min.js"></script>
<script src="/static/plugins/iCheck/icheck.min.js"></script>
<script src="/static/js/jquery.form.js"></script>
<script>
    function reset_password(){
        $('#warnPlace').html("")
        var password = $.trim($('#password').val())
        var password_confirm = $.trim($('#password_confirm').val())
        if(password ===""){
            $('#warnPlace').html("密码不能为空!")
        }
        else if(password !== password_confirm) {
            $('#warnPlace').html("密码不一致,请重新输入!")
        }
        else{
            if(password.length<6){
                $('#warnPlace').html("密码长度太短,请重新输入!")
            }
            else{
                $('#reset_password').submit()
            }
        }

    }
</script>
</body>
</html>