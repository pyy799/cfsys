{% extends 'base1.html' %}

{% block header_js %}
    <link rel="stylesheet" href="/static/plugins/datatables/dataTables.bootstrap.css">
    <link rel="stylesheet" href="/static/css/components.css">
    <link rel="stylesheet" href="/static/css/jpage.css">
    <!-- Morris chart -->
    <link rel="stylesheet" href="/static/plugins/morris/morris.css">
    <script src="/static/js/echarts/echarts.min.js"></script>
{% endblock %}


{% block content %}
    <div class="box box-solid" id="tablebox" style="padding-left: 20px;padding-right: 20px">
        <div class="box-header with-border">
            <h3>产品能力展示</h3>
        </div>
        <div class="box-body">

            <div class="table-actions-wrapper">


                <div class="row" style="margin-top: 10px">
                    <div class="col-lg-1 text-center">

                        <label><b>公司</b></label>
                    </div>
                    <div class="col-lg-1">
                        <label><input class="checkbox_company" type='checkbox' value="1">股份</label>
                    </div>
                    <div class="col-lg-1">
                        <label><input class="checkbox_company" type='checkbox' data-column="2"/>精一</label>
                    </div>
                    <div class="col-lg-1">
                        <label><input class="checkbox_company" type='checkbox' data-column="3"/>科威</label>
                    </div>
                    <div class="col-lg-1">
                        <label><input class="checkbox_company" type='checkbox' data-column="4"/>医疗</label>
                    </div>
                    <div class="col-lg-1">
                        <label><input class="checkbox_company" type='checkbox' data-column="5"/>柏克</label>
                    </div>
                    <div class="col-lg-1">
                        <label><input class="checkbox_company" type='checkbox' data-column="6"/>科技</label>
                    </div>
                    <div class="col-lg-1">
                        <label><input class="checkbox_company" type='checkbox' data-column="7"/>浙子</label>
                    </div>
                    <button class="btn btn-sm green checkall" id="checkall"><i class="fa fa-check"></i> 全选/反选
                    </button>
                    <button class="btn btn-warning btn-sm red clearAll"><i class="fa fa-times"></i> 清除</button>
                </div>

                <div class="row" style="margin-top: 20px">
                    <div class="col-lg-1 text-center">
                        <label><b>属性</b></label>
                    </div>
                    <div class="col-lg-11">
                        <label style="letter-spacing: 0.35em">成熟度 </label>
                        <select class="form-control input-inline input-small input-sm form-filter select "
                                name="maturity__first_class" data-placeholder='成熟度' style="width: 145px">
                            <option value=''></option>
                            {% for s in maturity %}
                                <option value="{{ s.first_class }}">{{ s.meaning }}</option>
                            {% endfor %}
                        </select>

                        <label style="letter-spacing: 0.35em">自主度</label>
                        <select class="form-control input-inline input-small input-sm form-filter select"
                                name="independence__first_class" data-placeholder='自主度' style="width: 145px">
                            <option value=''></option>
                            {% for s in independence %}
                                <option value="{{ s.first_class }}">{{ s.meaning }}</option>
                            {% endfor %}
                        </select>

                        <label>业务领域</label>
                        <select class="form-control input-inline input-small input-sm form-filter select"
                                name="business__first_class" data-placeholder='业务领域' style="width: 145px">
                            <option value=''></option>
                            {% for s in business %}
                                <option value="{{ s.first_class }}">{{ s.meaning }}</option>
                            {% endfor %}
                        </select>

                        <label>技术形态</label>
                        <select class="form-control input-inline input-small input-sm form-filter select"
                                name="technology__first_class" data-placeholder='技术形态' style="width: 145px">
                            <option value=''></option>
                            {% for s in technology %}
                                <option value="{{ s.first_class }}">{{ s.meaning }}</option>
                            {% endfor %}
                        </select>
                        <button class="btn btn-sm yellow filter-submit" style="margin-left:100px"><i
                                class="fa fa-search"></i> 查询
                        </button>
                        <button class="btn btn-sm red filter-cancel text-right"><i class="fa fa-times"></i> 取消查询
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <section class="content" style="margin-bottom: -80px">
            <!-- Main row -->
            <div class="row">
                <!-- Left col -->
                <section class="col-lg-7 col-md-12 col-sm-12">
                    <div class="box box-success">
                        <div class="box-header">
                            <h3 class="box-title">成熟度-自主度</h3>
                            <div class="box-tools pull-right">
                                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i
                                        class="fa fa-minus"></i>
                                </button>
                                <button type="button" class="btn btn-box-tool" data-widget="remove"><i
                                        class="fa fa-times"></i></button>
                            </div>
                        </div>
                        <div class="box-footer text-black">
                            {#                            <div id="containerl1" style="width: 700px;height:420px;" height="700" width="420"></div>#}
                            <div id="containerl1" style="width: 100%;height:420px;"></div>

                            <script type="text/javascript">
                                var dom = document.getElementById("containerl1");
                                var myChart = echarts.init(dom);
                                var app = {};
                                option = null;
                                app.title = '成熟度-自主度';

                                var legendData1 = {{ independence_list|safe }};
                                var legendData2 = {{ maturity_list|safe }};

                                var data = {{ maturity_independence }}
                                    data = data.map(function (item) {
                                        return [item[1], item[0], item[2] || '-'];
                                    });

                                option = {
                                    tooltip: {
                                        trigger: 'item',
                                        formatter: '<p>{a}</p>{b}:{c}',
                                        position: 'top'
                                    },
                                    animation: false,
                                    grid: {
                                        height: '55%',
                                        y: '10%',
                                        x: '15%'
                                    },
                                    xAxis: {
                                        type: 'category',
                                        data: legendData2,
                                        splitArea: {
                                            show: true
                                        }
                                    },
                                    yAxis: {
                                        type: 'category',
                                        data: legendData1,
                                        splitArea: {
                                            show: true
                                        }
                                    },
                                    visualMap: {
                                        min: 0,
                                        max: 20,
                                        calculable: true,
                                        orient: 'horizontal',
                                        left: 'center',
                                        bottom: '8%',
                                        inRange: {
                                            color: ['#98cafb', '#021a31']
                                        }
                                    },
                                    series: [{
                                        name: '产品数量',
                                        type: 'heatmap',
                                        data: data,
                                        label: {
                                            normal: {
                                                show: true
                                            }
                                        },
                                        itemStyle: {
                                            emphasis: {
                                                shadowBlur: 10,
                                                shadowColor: 'rgba(0, 0, 0, 0.5)'
                                            }
                                        }
                                    }]
                                };

                                if (option && typeof option === "object") {
                                    myChart.setOption(option, true);
                                }
                            </script>
                            <span>产品的成熟度和自主程度是衡量产品效益的重要参考因素，因此产品能力的成熟度-自主度的（M-I）交叉矩阵所代表的是两个维度上不同级别的产品能力，便于公司内部评估分层管理。</span>

                        </div>

                    </div>
                    <div class="box box-success">
                        <div class="box-header">
                            <h3 class="box-title">业务领域-技术形态</h3>
                            <div class="box-tools pull-right">
                                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i
                                        class="fa fa-minus"></i>
                                </button>
                                <button type="button" class="btn btn-box-tool" data-widget="remove"><i
                                        class="fa fa-times"></i></button>
                            </div>
                        </div>
                        <!-- /.box-header -->
                        <div class="box-footer text-black">
                            <div id="containerl2" style="width: 100%;height:420px;"></div>
                            <script type="text/javascript">
                                var dom = document.getElementById("containerl2");
                                var myChart = echarts.init(dom);
                                var app = {};
                                option = null;
                                app.title = '业务领域-技术形态';

                                var legendData1 = {{ business_list|safe }};
                                var legendData2 = {{ technology_list|safe }};

                                var data = {{ business_technology }}
                                    data = data.map(function (item) {
                                        return [item[1], item[0], item[2] || '-'];
                                    });

                                option = {
                                    tooltip: {
                                        position: 'top'
                                    },
                                    animation: false,
                                    grid: {
                                        height: '70%',
                                        x: '15%',
                                        y: '3%'
                                    },
                                    xAxis: {
                                        type: 'category',
                                        data: legendData1,
                                        splitArea: {
                                            show: true
                                        }
                                    },
                                    yAxis: {
                                        type: 'category',
                                        data: legendData2,
                                        splitArea: {
                                            show: true
                                        }
                                    },
                                    visualMap: {
                                        min: 0,
                                        max: 20,
                                        calculable: true,
                                        orient: 'horizontal',
                                        left: 'center',
                                        bottom: '8%',
                                        inRange: {
                                            color: ['#88f7fb', '#023e41']
                                        }
                                    },
                                    series: [{
                                        name: 'ww',
                                        type: 'heatmap',
                                        data: data,
                                        label: {
                                            normal: {
                                                show: true
                                            }
                                        },
                                        itemStyle: {
                                            emphasis: {
                                                shadowBlur: 10,
                                                shadowColor: 'rgba(0, 0, 0, 0.5)'
                                            }
                                        }
                                    }]
                                };
                                ;
                                if (option && typeof option === "object") {
                                    myChart.setOption(option, true);
                                }
                            </script>
                            <span>产品的业务领域和技术形态是产品应用方向的重要参考因素，因此产品能力的业务领域-技术形态的（B-T）交叉矩阵所代表的是各个细分行业领域所适用的产品能力，便于公司外部应用评估。</span>

                        </div>
                    </div>
                </section>
                <!-- /.Left col -->
                <!-- right col (We are only adding the ID to make the widgets sortable)-->
                <section class="col-lg-5 col-md-12 col-sm-12">
                    <!-- 业务领域 -->
                    <div class="box box-success">
                        <div class="box-header ui-sortable-handle" style="cursor: move;">
                            <h3 class="box-title">业务领域</h3>
                            <div class="box-tools pull-right">
                                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i
                                        class="fa fa-minus"></i>
                                </button>
                                <button type="button" class="btn btn-box-tool" data-widget="remove"><i
                                        class="fa fa-times"></i></button>
                            </div>
                        </div>
                        <div class="box-body">
                            <div id="container1" style="width: 100%;height:189px"></div>
                            <script type="text/javascript">
                                var dom = document.getElementById("container1");
                                var myChart = echarts.init(dom);
                                var app = {};
                                option = null;
                                product_list = {"name": '电源业务大类', "p_l": ['sss', 'rr', 'ggg', 'rrr', 'rrrrr']};

                                option = {
                                    title: {
                                        text: '',
                                        subtext: '',
                                        x: 'center'
                                    },
                                    tooltip: {
                                        trigger: 'item',
                                        formatter: "{a} <br/>{b} : {c}个 ({d}%)"
                                        {#formatter: function (params) {#}
                                        {#    var $pna = params.name;#}
                                        {#    var res = '';#}
                                        {#    for (var i = 0; i < $product_list.length; i++) {#}
                                        {#        if ($product_list[i].name == $pna) {#}
                                        {#            res = '<span>$product_list[i].p_l</span>'#}
                                        {#            break;#}
                                        {#        }#}
                                        {#    }#}
                                        {#    setTimeout(function () {#}
                                        {#        // 仅为了模拟异步回调#}
                                        {#        callback(ticket, res);//回调函数，这里可以做异步请求加载的一些代码#}
                                        {#    }, 1000)#}
                                        {#    return 'loading';#}
                                        {##}
                                    },
                                    legend: {
                                        type: 'scroll',
                                        orient: 'vertical',
                                        right: 10,
                                        top: 20,
                                        bottom: 20,

                                        data: {{ business_list|safe }},
                                        selected: true

                                    },
                                    series: [
                                        {
                                            name: '产品数量',
                                            type: 'pie',
                                            radius: '55%',
                                            center: ['35%', '50%'],
                                            selectedMode: 'single',
                                            data: {{ business_product1|safe }},
                                            itemStyle: {
                                                emphasis: {
                                                    shadowBlur: 10,
                                                    shadowOffsetX: 0,
                                                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                                                },
                                                normal: {
                                                    label: {
                                                        show: true,
                                                        formatter: '{d}%'
                                                    },
                                                    labelLine: {show: true}
                                                }
                                            }
                                        }

                                    ]
                                };

                                if (option && typeof option === "object") {
                                    myChart.setOption(option, true);
                                }
                            </script>
                        </div>
                    </div>

                    <!-- 技术形态 -->
                    <div class="box box-success">
                        <div class="box-header ui-sortable-handle" style="cursor: move;">
                            <h3 class="box-title">技术形态</h3>
                            <div class="box-tools pull-right">
                                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i
                                        class="fa fa-minus"></i>
                                </button>
                                <button type="button" class="btn btn-box-tool" data-widget="remove"><i
                                        class="fa fa-times"></i></button>
                            </div>
                        </div>
                        <div class="box-body">
                            <div id="container2" style="width: 100%;height:189px"></div>
                            <script type="text/javascript">
                                var dom = document.getElementById("container2");
                                var myChart = echarts.init(dom);
                                var app = {};
                                option = null;
                                var data = getData();

                                option = {
                                    title: {
                                        text: '',
                                        subtext: '',
                                        x: 'center'
                                    },
                                    tooltip: {
                                        trigger: 'item',
                                        formatter: "{a} <br/>{b} : {c}个 ({d}%)"
                                    },
                                    legend: {
                                        type: 'scroll',
                                        orient: 'vertical',
                                        right: 70,
                                        top: 20,
                                        bottom: 20,
                                        data: data.legendData,
                                        selected: data.selected,
                                    },
                                    series: [
                                        {
                                            name: '产品数量',
                                            type: 'pie',
                                            radius: '55%',
                                            center: ['35%', '50%'],
                                            selectedMode: 'single',
                                            data: data.seriesData,
                                            itemStyle: {
                                                emphasis: {
                                                    shadowBlur: 10,
                                                    shadowOffsetX: 0,
                                                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                                                },
                                                normal: {
                                                    label: {
                                                        show: true,
                                                        formatter: '{d}%'
                                                    },
                                                    labelLine: {show: true}
                                                }
                                            }
                                        }
                                    ]
                                }

                                function getData() {
                                    var legendData = [];
                                    var seriesData = [];
                                    var selected = {};
                                    {% for k,v in technology_product.items %}
                                        legendData.push('{{ k }}');
                                        seriesData.push({
                                            name: '{{ k }}',
                                            value: {{ v }},
                                        });
                                        selected['{{ k }}'] = true;
                                    {% endfor %}
                                    return {
                                        legendData: legendData,
                                        seriesData: seriesData,
                                        selected: selected
                                    };
                                };

                                if (option && typeof option === "object") {
                                    myChart.setOption(option, true);
                                }
                            </script>
                        </div>
                    </div>
                    <!-- 成熟度 -->
                    <div class="box box-success">
                        <div class="box-header ui-sortable-handle" style="cursor: move;">
                            <h3 class="box-title">成熟度</h3>
                            <div class="box-tools pull-right">
                                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i
                                        class="fa fa-minus"></i>
                                </button>
                                <button type="button" class="btn btn-box-tool" data-widget="remove"><i
                                        class="fa fa-times"></i></button>
                            </div>
                        </div>
                        <div class="box-body">
                            <div id="container3" style="width: 100%;height:189px"></div>
                            <script type="text/javascript">
                                var dom = document.getElementById("container3");
                                var myChart = echarts.init(dom);
                                var app = {};
                                option = null;
                                var data = getData();

                                option = {
                                    title: {
                                        text: '',
                                        subtext: '',
                                        x: 'center'
                                    },
                                    tooltip: {
                                        trigger: 'item',
                                        formatter: "{a} <br/>{b} : {c}个 ({d}%)"
                                    },
                                    legend: {
                                        type: 'scroll',
                                        orient: 'vertical',
                                        right: -10,
                                        top: 20,
                                        bottom: 20,
                                        data: data.legendData,
                                        selected: data.selected,
                                    },
                                    series: [
                                        {
                                            name: '产品数量',
                                            type: 'pie',
                                            radius: '55%',
                                            center: ['35%', '50%'],
                                            selectedMode: 'single',
                                            data: data.seriesData,
                                            itemStyle: {
                                                emphasis: {
                                                    shadowBlur: 10,
                                                    shadowOffsetX: 0,
                                                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                                                },
                                                normal: {
                                                    label: {
                                                        show: true,
                                                        formatter: '{d}%'
                                                    },
                                                    labelLine: {show: true}
                                                }
                                            }
                                        }
                                    ]
                                }

                                function getData() {
                                    var legendData = [];
                                    var seriesData = [];
                                    var selected = {};
                                    {% for k,v in maturity_product.items %}
                                        legendData.push('{{ k }}');
                                        seriesData.push({
                                            name: '{{ k}}',
                                            value: {{ v}},
                                        });
                                        selected['{{ k }}'] = true;
                                    {% endfor %}
                                    return {
                                        legendData: legendData,
                                        seriesData: seriesData,
                                        selected: selected
                                    };
                                }
                                ;

                                if (option && typeof option === "object") {
                                    myChart.setOption(option, true);
                                }
                            </script>
                        </div>
                    </div>

                    <!-- 自主度 -->
                    <div class="box box-success">
                        <div class="box-header ui-sortable-handle" style="cursor: move;">
                            <h3 class="box-title">自主度</h3>
                            <div class="box-tools pull-right">
                                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i
                                        class="fa fa-minus"></i>
                                </button>
                                <button type="button" class="btn btn-box-tool" data-widget="remove"><i
                                        class="fa fa-times"></i></button>
                            </div>
                        </div>
                        <div class="box-body">
                            <div id="container4" style="width: 100%;height:189px"></div>
                            <script type="text/javascript">
                                var dom = document.getElementById("container4");
                                var myChart = echarts.init(dom);
                                var app = {};
                                option = null;
                                var data = getData();

                                option = {
                                    title: {
                                        text: '',
                                        subtext: '',
                                        x: 'center'
                                    },
                                    tooltip: {
                                        trigger: 'item',
                                        formatter: "{a} <br/>{b} : {c} 个 ({d}%)"
                                    },
                                    legend: {
                                        type: 'scroll',
                                        orient: 'vertical',
                                        right: -10,
                                        top: 20,
                                        bottom: 20,
                                        data: data.legendData,
                                        selected: data.selected,
                                    },
                                    series: [
                                        {
                                            name: '产品数量',
                                            type: 'pie',
                                            radius: '55%',
                                            center: ['35%', '50%'],
                                            selectedMode: 'single',
                                            data: data.seriesData,
                                            itemStyle: {
                                                emphasis: {
                                                    shadowBlur: 10,
                                                    shadowOffsetX: 0,
                                                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                                                },
                                                normal: {
                                                    label: {
                                                        show: true,
                                                        formatter: '{d}%'
                                                    },
                                                    labelLine: {show: true}
                                                }
                                            }
                                        }
                                    ]
                                }

                                function getData() {
                                    var legendData = [];
                                    var seriesData = [];
                                    var selected = {};
                                    {% for k,v in independence_product.items %}
                                        legendData.push('{{ k }}');
                                        seriesData.push({
                                            name: '{{ k }}',
                                            value: {{ v }},
                                        });
                                        selected['{{ k }}'] = true;
                                    {% endfor %}
                                    return {
                                        legendData: legendData,
                                        seriesData: seriesData,
                                        selected: selected
                                    };
                                };

                                if (option && typeof option === "object") {
                                    myChart.setOption(option, true);
                                }
                            </script>
                        </div>
                    </div>

                </section>
                <!-- right col -->
            </div>
            <!-- /.row (main row) -->

        </section>
    </div>









{% endblock %}

{% block footer_js %}
    <!-- Morris.js charts -->
    <script src="/static/js/raphael/raphael-min.js"></script>
    <script src="/static/plugins/morris/morris.min.js"></script>

    <script src="/static/plugins/jquery.blockui.min.js"></script>
    <script src="/static/plugins/datatables/jquery.dataTables.js"></script>
    <script src="/static/plugins/datatables/dataTables.bootstrap.min.js"></script>
    <script src="/static/js/metronic.js"></script>
    <script src="/static/js/table-ext.js"></script>
    <script src="/static/js/datatable.js"></script>
    <script src="/static/js/jPages.js"></script>
    <script>
        $('#checkall').click(function () {
            //全选按钮
            $(".checkall").click(function () {
                $("#checkbox_company input[type='checkbox']").each(function () {
                    var check = $(this).parent("span").hasClass("checked");
                    if (!check) {
                        $(this).prop("checked", true).uniform('refresh');
                    } else {
                        $(this).prop("checked", false).uniform('refresh');
                    }
                    {#$(this).parents("tr").toggleClass("selected")#}
                });
            });

        })
    </script>
{% endblock %}
